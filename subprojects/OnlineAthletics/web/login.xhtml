<?xml version='1.0' encoding='UTF-8' ?>

<!--
 * IntelliJustice Intelligent Referee Assistant System
 *
 * The MIT License
 *
 * Copyright 2011-2013 Andrey Pudov.
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in
 * all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN
 * THE SOFTWARE.
-->

<!--
    Document   : login.xhtml
    Created on : Nov 23, 2012, 04:20:00 PM
    Author     : Andrey Pudov        <mail@andreypudov.com>
    Description:
        The general application login page.
-->
<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:h="http://xmlns.jcp.org/jsf/html"
      xmlns:ui="http://java.sun.com/jsf/facelets"
      xmlns:p="http://xmlns.jcp.org/jsf/passthrough"
      xmlns:f="http://xmlns.jcp.org/jsf/core">
    <h:body>
        <ui:composition template='resources/schemas/layout.xhtml'>
            <ui:define name='title'>
                <title>Online Athletics - Authentication</title>
            </ui:define>
            <ui:define name='content'>
                <div class='container marketing'>
                    <div class="page-header col-sm-6 col-sm-offset-6">
                        <h1>Sign in</h1>
                    </div>
                    
                    <div class='row'>
                        <h:form>
                            <!-- the form validation handler -->
                            <f:event listener="#{loginForm.validate}" type="postValidate" />
                            
                            <!-- the error message block -->
                            <div class="col-sm-6 col-sm-offset-6" style="display: #{(!loginForm.usernameValid || !loginForm.passwordValid) ? 'initial' : 'none'}">
                                <div class="alert alert-danger">
                                    <p>
                                        <strong>${MESSAGES.contact_form_title}</strong>
                                        ${MESSAGES.contact_form_subtitile}
                                        <ul>
                                            <li style="display: #{!loginForm.usernameValid ? 'list-item' : 'none'}"><h:message for="j_username" /></li>
                                            <li style="display: #{!loginForm.passwordValid ? 'list-item' : 'none'}"><h:message for="j_password" /></li>
                                        </ul>
                                    </p>
                                </div>
                            </div>
                            
                            <!-- the error message block -->
                            <div class="col-sm-6 col-sm-offset-6" style="display: #{param['auth'].equals('failed') ? 'initial' : 'none'}">
                                <div class="alert alert-danger">
                                    <p>
                                        <strong>${MESSAGES.contact_form_title}</strong>
                                        ${MESSAGES.contact_form_subtitile}
                                    </p>
                                </div>
                            </div>
                            
                            <div class='col-sm-6 col-sm-offset-6'>
                                <small>Online Athletics account <a href='#'>What's this?</a></small>
                                <div class='form-group'>
                                    <h:inputText id='j_username' class='form-control'
                                                 value='#{loginForm.username}' p:type='text' 
                                                 p:placeholder='someone@example.com' />
                                </div>
                                
                                <div class='form-group'>
                                    <h:inputText id='j_password' class='form-control'
                                                 value='#{loginForm.password}' p:type='password'
                                                 p:placeholder='Password' />
                                </div>

                                <div class='form-group'>
                                    <a class='btn btn-primary btn-container'>
                                        <h:commandButton id="submitButton" value="Sign in" action='#{loginForm.login()}' />
                                    </a>
                                </div>
                                
                                <a href='#'>Can't access your account?</a>
                            </div>
                        </h:form>
                    </div>
                </div>
            </ui:define>
        </ui:composition>
    </h:body>
</html>